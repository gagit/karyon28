   
    public function getQuery{{ entity_class }}($filtro) {

        $qb = $this->createQueryBuilder('q')
                ->select('q');
        {% for field,metadata in fields %}
            {% if field !='id' %}
        if($filtro->{{ field }}) {
            $qb->andWhere($qb->expr()->eq('q.{{ field }}', ':{{ field }}'))
                ->setParameter('{{ field }}', $filtro->{{ field }});
        }
            {% endif %}
        {% endfor %}
        
        return  $qb;
    }

